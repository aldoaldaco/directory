<link rel="import" href="../../bower_components/polymer-redux/polymer-redux.html">

<script>
    const initialState = {
        languages: [{
            name: 'english',
            key: 'en'
        }, {
            name: 'spanish',
            key: 'es'
        }, {
            name: 'french',
            key: 'fr'
        }, {
            name: 'italian',
            key: 'it'
        }],
        languageSelected: 'en',
        contacts: [],
        contact: {}
    }

    function contacts(state = initialState, action) {
        switch (action.type) {
            case 'ADD_CONTACT': {
                const newcontacts = state.contacts.splice(0);
                newcontacts.push(action.contact);
                return Object.assign({}, state, {
                    languages: state.languages,
                    languageSelected: state.languageSelected,
                    contacts: newcontacts,
                    contact: action.contact
                });
            }
            case 'CHANGE_LANGUAGE': {
                return Object.assign({}, state, {
                    languages: state.languages,
                    languageSelected: action.language,
                    contacts: state.contacts,
                    contact: state.contact
                });
            }
            default: {
                return state;
            }
        }
    }

    const store = Redux.createStore(contacts);
    const ReduxMixin = PolymerRedux(store);
</script>
